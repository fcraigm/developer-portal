---
title: Lifecycle Webhooks
---

## Was sind Lifecycle Webhooks?

Lifecycle Events werden von mittwald genutzt, um die externe Anwendung über sie betreffende Ereignisse zu informieren.

Alle Webhooks werden `at least once` aufgerufen und sind somit so zu entwerfen, dass mehrfache Aufrufe nicht zu Fehlern führen.

### ExtensionAddedToContext

Dieses Event dient dazu, externen Anwendungen mitzuteilen, dass die Extension zu einem neuen Kontext hinzugefügt wurde.
Im Rahmen dieses Prozesses werden die Extension Instance ID und das Extension Instance Secret erstmalig übermittelt.

Das Extension Instance Secret kann jedoch erst verwendet werden, nachdem der entsprechende Webhook erfolgreich verarbeitet wurde.
Aufgrund der asynchronen Verarbeitung kann auch nach erfolgreicher Verarbeitung noch ein zeitlicher Abstand bestehen, bis das Secret tatsächlich genutzt werden kann.

Daher wird empfohlen, die Verarbeitung und die Verwendung des Secrets voneinander zu entkoppeln und damit zu rechnen,
dass Versuche, das Secret zu verwenden, fehlschlagen können.

Für weitere Informationen dazu, wie das Extension Instance Secret verwendet werden kann, siehe [Authentifizierung](../authentication#extension-instance-secret).

### ExtensionInstanceUpdated

In diesem Event wird der externen Anwendung eine Zustandsänderung der `Extension Instance` mitgeteilt.
Der externen Anwendung wird dabei immer der gesamte neue Zustand mitgeteilt.

Das kann beispielsweise die De-/Aktivierung der `Extension Instance` sein.

### ExtensionInstanceSecretRotated

Aus Sicherheitsgründen wird das Extension Instance Secret regelmäßig rotiert.
Das neue Secret wird über diesen Webhook mitgeteilt.
Das vorherige Secret ist ab diesem Zeitpunkt nicht mehr gültig.
Analog zum [ExtensionAddedToContext](#extensionaddedtocontext)-Webhook kann auch hier ein zeitlicher Abstand zwischen dem Webhook und der tatsächlichen Nutzbarkeit des Secrets bestehen.

### ExtensionInstanceRemovedFromContext

Dieser Webhook drückt aus, dass eine `Extension Instance` aus einem Context entfernt wurde.
Datenschutzrelevante Konsequenzen, wie die Löschung von personenbezogenen Daten, sollten an dieser Stelle berücksichtigt werden.

## Webhook Validierung

Um sicherzustellen, dass der Webhook von mittwald ausging, wird die Möglichkeit geboten, die Identität des Senders und den Inhalt des Request Bodys zu verifizieren.
Neben dem Request Body, der den Webhook Payload enthält, wird in Request Headern eine Signatur inklusive der Meta-Informationen über diese versendet.

Dies ist aus Sicht des Contributors und der Extension wichtig, da somit sichergestellt werden kann, dass der Webhook-Call wirklich von mittwald stammt.
Ohne eine funktionierende Webhook Validierung besteht das Risiko, dass ein potenzieller Angreifer nur die URL kennen muss, um falsche Extension Instances vorzutäuschen oder bestehende zu korrumpieren.
Für weitere Informationen dazu, wie Webhooks auf ihre Echtheit überprüft werden können, siehe [Validierung von Lifecycle Webhooks Referenz](../../../reference/webhooks#validierung-von-lifecycle-webhooks).
