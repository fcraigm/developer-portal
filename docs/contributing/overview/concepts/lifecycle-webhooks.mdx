---
title: Lifecycle Webhooks
sidebar_position: 2
---

## Was sind Lifecycle Webhooks?

Lifecycle Events werden von mittwald genutzt, um die externe Anwendung über sie betreffende Ereignisse zu informieren.

Alle Webhooks werden `at least once` aufgerufen und sind somit so zu entwerfen, dass mehrfache Aufrufe nicht zu Fehlern führen.

### ExtensionAddedToContext

Dieses Event dient dazu, externen Anwendungen mitzuteilen, dass die Extension zu einem neuen Kontext hinzugefügt wurde.
Im Rahmen dieses Prozesses werden die Extension Instance ID und das Extension Instance Secret erstmalig übermittelt.

Das Extension Instance Secret kann jedoch erst verwendet werden, nachdem der entsprechende Webhook erfolgreich verarbeitet wurde.
Aufgrund der asynchronen Verarbeitung kann auch nach erfolgreicher Verarbeitung noch ein zeitlicher Abstand bestehen, bis das Secret tatsächlich genutzt werden kann.

Daher wird empfohlen, die Verarbeitung und die Verwendung des Secrets voneinander zu entkoppeln, um sicherzustellen, dass die Anwendung korrekt funktioniert und keine unnötigen Wartezeiten entstehen.

Für weitere Informationen dazu, wie das Extension Instance Secret verwendet werden kann, siehe [Authentifizierung](./authentication.mdx#extension-instance-secret).


### ExtensionInstanceUpdated

In diesem Event wird der externen Anwendung eine Zustandsänderung der `Extension Instance` mitgeteilt. Der externen Anwendung wird dabei immer der gesamte neue Zustand mitgeteilt.

Das kann beispielsweise die De-/Aktivierung der `Extension Instance` sein.

### ExtensionInstanceSecretRotated

Aus Sicherheitsaspekten werden wir regelmäßig das Extension Instance Secret rotieren.
Das neue Secret wird über diesen Webhook mitgeteilt.
Das vorherige Secret ist ab diesem Zeitpunkt nicht mehr gültig.
Siehe dazu auch [ExtensionAddedToContext](#extensionaddedtocontext).

### ExtensionInstanceRemovedFromContext

Eine `Extension Instance` wurde aus einem Context entfernt.

Datenschutzrelevante Konsequenzen sollten an dieser Stelle berücksichtigt werden.
## Webhook Validierung

Um sicherzustellen, dass der Webhook von mittwald ausging, bieten wir die Möglichkeit, die Identität des Senders und den Inhalt des Request Bodys zu verifizieren.
Dazu signieren wir den versendeten Request Body und schicken die Signatur inklusive der Meta-Informationen darüber in Request-Headern mit.

Dies ist aus Sicht des Contributors und der Extension wichtig, da somit sichergestellt werden kann, dass der Webhook-Call wirklich von mittwald stammt.
Ohne eine funktionierende Webhook Validierung besteht das Risiko, dass ein potentieller Angreifer nur die URL kennen muss, um falsche Extension Instances vorzutäuschen oder bestehende zu korrumpieren.
Für weitere Informationen dazu, wie Webhooks auf ihre Echtheit überprüft werden können, siehe [Validierung von Lifecycle Webhooks Referenz](../../../reference/webhooks#validierung-von-lifecycle-webhooks).
