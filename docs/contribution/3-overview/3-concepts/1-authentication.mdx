---
title: Authentication
---

## OAuth2

mittwald supports the authentication mechanism OAuth 2.0 for its public API.
[RFC 6749](https://tools.ietf.org/html/rfc6749) specifies this mechanism.
OAuth2 supports the following flows:

- Authorization Code Grant
- Authorization Code Grant with PKCE

To use OAuth2, you have to [create an OAuth2 client](../../../how-to/create-extension#creating-an-oauth2-client) that requests the required scopes.
You can use this client to execute OAuth 2.0 authentication procedures.
For further information on the necessary API endpoints for the OAuth2 flow, see [OAuth2 endpoints](../../../reference/api#oauth2).

## Access Token Retrieval Key

The mStudio provides a single sign-on (SSO) mechanism to allow its users convenient access to extensions.
The user is redirected to the external application and authenticated at the click of a button in the mStudio.

To do this, the mStudio generates an access token retrieval key (ATReK) and sends it to the frontend of the extension when the button is clicked.
This only happens, if the extension provides a URL template that contains the ATReK and the UserID as placeholders.
For further information, see [extension external frontend](../../extensions#external-frontend).

The validity of the ATReK is short and expires after one use.
For this reason, the external application must use the ATReK immediately to obtain an access token.
For further information on how an ATReK is exchanged for an access token, see [access token retrieval key reference](../../../reference/api#using-an-access-token-retrieval-key)

The access token created from an ATReK represents the executing mStudio user.
Its permissions are limited by the scopes of the extension and the permissions of the mStudio user.
This ensures that the extension user can only perform those domain actions that they are allowed to perform in the mStudio.
It also ensures that an extension does not have more permissions than requested by the extension.

## Extension Instance Secret

Um autark und ohne Nutzerinteraktion agieren zu können, erhält die Extension ein eigenes Secret pro Extension Instance.
Dieses wird der externen Anwendung mittels Lifecycle Webhooks übermittelt.
Siehe dazu auch [Lifecycle Webhooks](../lifecycle-webhooks).
Mit der Extension Instance ID und diesem Secret kann ein Extension Access Token abgerufen werden.
Dabei sind die Berechtigungen anhand der Scopes der Extension eingeschränkt.

Für weitere Informationen über die Informationen, die in Lifecycle Webhooks mitgeschickt werden, siehe [Lifecycle Webhooks](../../../reference/webhooks).
Für weitere Informationen darüber, wie ein Extension Secret gegen ein Access Token ausgetauscht wird, siehe [Extension Secret Referenz](../../../reference/api#authentifizierung-mittels-extension-instance-secret)

Mit dieser Methode kann ebenfalls eine eigene Nutzerverwaltung bereitgestellt werden.
Nutzer, die von der externen Anwendung registriert werden,
kommunizieren alle im Namen der Extension Instance und teilen sich unterliegend dasselbe Extension Secret.

## Abfragen von Anmeldeinformationen des mStudio Nutzers

Das direkte Abfragen der mStudio-Anmeldeinformationen ist keine akzeptable Methode,
da der Nutzer nicht dazu konditioniert werden soll, seine Anmeldeinformationen an eine Drittanbieteranwendung weiterzugeben.

## Nutzung des erhaltenen Access Tokens

Für eine Beschreibung, wie das erhaltene Access Token verwendet werden kann, siehe [Nutzung von Access Tokens zur Authentifizierung](../../../reference/api#nutzung-von-access-tokens-zur-authentifizierung).
